<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flag Guessing Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #333;
        }

        .game-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        .header {
            margin-bottom: 2rem;
        }

        .header h1 {
            color: #333;
            margin-bottom: 0.5rem;
        }

        .score {
            color: #666;
            font-size: 1.1rem;
        }

        .flag-container {
            margin: 2rem 0;
            position: relative;
            display: inline-block;
        }

        .flag {
            max-width: 320px;
            width: 100%;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }

        .flag:hover {
            transform: scale(1.05);
        }

        .input-container {
            position: relative;
            margin: 2rem 0;
        }

        .country-input {
            width: 100%;
            padding: 1rem;
            font-size: 1.1rem;
            border: 2px solid #ddd;
            border-radius: 10px;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .country-input:focus {
            border-color: #667eea;
        }

        .autocomplete-container {
            position: relative;
        }

        .autocomplete-list {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-top: none;
            border-radius: 0 0 10px 10px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .autocomplete-item {
            padding: 0.75rem;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            text-align: left;
        }

        .autocomplete-item:hover,
        .autocomplete-item.selected {
            background: #f0f0f0;
        }

        .autocomplete-item:last-child {
            border-bottom: none;
        }

        .buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin: 2rem 0;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #f1f1f1;
            color: #333;
        }

        .btn-secondary:hover {
            background: #e1e1e1;
            transform: translateY(-2px);
        }

        .feedback {
            margin: 1rem 0;
            padding: 1rem;
            border-radius: 10px;
            font-weight: 600;
            display: none;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #eee;
        }

        .stat {
            text-align: center;
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.25rem;
        }

        .loading {
            color: #666;
            font-style: italic;
        }

        @media (max-width: 600px) {
            .game-container {
                padding: 1.5rem;
            }

            .buttons {
                flex-direction: column;
            }

            .stats {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>üèÅ Flag Guessing Game</h1>
            <div class="score">Score: <span id="score">0</span> / <span id="total">0</span></div>
        </div>

        <div class="flag-container">
            <img id="flag" class="flag" src="" alt="Flag to guess" style="display: none;">
            <div id="loading" class="loading">Loading game...</div>
        </div>

        <div class="input-container">
            <div class="autocomplete-container">
                <input
                    type="text"
                    id="countryInput"
                    class="country-input"
                    placeholder="Type the country name..."
                    autocomplete="off"
                    disabled
                >
                <div id="autocompleteList" class="autocomplete-list"></div>
            </div>
        </div>

        <div id="feedback" class="feedback"></div>

        <div class="buttons">
            <button id="submitBtn" class="btn btn-primary" disabled>Submit Guess</button>
            <button id="skipBtn" class="btn btn-secondary" disabled>Skip</button>
            <button id="nextBtn" class="btn btn-primary" style="display: none;">Next Flag</button>
        </div>

        <div class="stats">
            <div class="stat">
                <div id="correctCount" class="stat-number">0</div>
                <div class="stat-label">Correct</div>
            </div>
            <div class="stat">
                <div id="incorrectCount" class="stat-number">0</div>
                <div class="stat-label">Incorrect</div>
            </div>
            <div class="stat">
                <div id="skippedCount" class="stat-number">0</div>
                <div class="stat-label">Skipped</div>
            </div>
        </div>
    </div>

    <script>
        // Countries data - automatically generated from scripts/downloader/countries.json
        const COUNTRIES_DATA = [
        {
                "name": "Flag of Afghanistan",
                "slug": "afghanistan",
                "url": "https://flagpedia.net/afghanistan",
                "code": "af"
        },
        {
                "name": "Flag of Albania",
                "slug": "albania",
                "url": "https://flagpedia.net/albania",
                "code": "al"
        },
        {
                "name": "Flag of Algeria",
                "slug": "algeria",
                "url": "https://flagpedia.net/algeria",
                "code": "dz"
        },
        {
                "name": "Flag of Andorra",
                "slug": "andorra",
                "url": "https://flagpedia.net/andorra",
                "code": "ad"
        },
        {
                "name": "Flag of Angola",
                "slug": "angola",
                "url": "https://flagpedia.net/angola",
                "code": "ao"
        },
        {
                "name": "Flag of Antigua and Barbuda",
                "slug": "antigua-and-barbuda",
                "url": "https://flagpedia.net/antigua-and-barbuda",
                "code": "ag"
        },
        {
                "name": "Flag of Argentina",
                "slug": "argentina",
                "url": "https://flagpedia.net/argentina",
                "code": "ar"
        },
        {
                "name": "Flag of Armenia",
                "slug": "armenia",
                "url": "https://flagpedia.net/armenia",
                "code": "am"
        },
        {
                "name": "Flag of Australia",
                "slug": "australia",
                "url": "https://flagpedia.net/australia",
                "code": "au"
        },
        {
                "name": "Flag of Austria",
                "slug": "austria",
                "url": "https://flagpedia.net/austria",
                "code": "at"
        },
        {
                "name": "Flag of Azerbaijan",
                "slug": "azerbaijan",
                "url": "https://flagpedia.net/azerbaijan",
                "code": "az"
        },
        {
                "name": "Flag of Bahamas",
                "slug": "the-bahamas",
                "url": "https://flagpedia.net/the-bahamas",
                "code": "bs"
        },
        {
                "name": "Flag of Bahrain",
                "slug": "bahrain",
                "url": "https://flagpedia.net/bahrain",
                "code": "bh"
        },
        {
                "name": "Flag of Bangladesh",
                "slug": "bangladesh",
                "url": "https://flagpedia.net/bangladesh",
                "code": "bd"
        },
        {
                "name": "Flag of Barbados",
                "slug": "barbados",
                "url": "https://flagpedia.net/barbados",
                "code": "bb"
        },
        {
                "name": "Flag of Belarus",
                "slug": "belarus",
                "url": "https://flagpedia.net/belarus",
                "code": "by"
        },
        {
                "name": "Flag of Belgium",
                "slug": "belgium",
                "url": "https://flagpedia.net/belgium",
                "code": "be"
        },
        {
                "name": "Flag of Belize",
                "slug": "belize",
                "url": "https://flagpedia.net/belize",
                "code": "bz"
        },
        {
                "name": "Flag of Benin",
                "slug": "benin",
                "url": "https://flagpedia.net/benin",
                "code": "bj"
        },
        {
                "name": "Flag of Bhutan",
                "slug": "bhutan",
                "url": "https://flagpedia.net/bhutan",
                "code": "bt"
        },
        {
                "name": "Flag of Bolivia",
                "slug": "bolivia",
                "url": "https://flagpedia.net/bolivia",
                "code": "bo"
        },
        {
                "name": "Flag of Bosnia and Herzegovina",
                "slug": "bosnia-and-herzegovina",
                "url": "https://flagpedia.net/bosnia-and-herzegovina",
                "code": "ba"
        },
        {
                "name": "Flag of Botswana",
                "slug": "botswana",
                "url": "https://flagpedia.net/botswana",
                "code": "bw"
        },
        {
                "name": "Flag of Brazil",
                "slug": "brazil",
                "url": "https://flagpedia.net/brazil",
                "code": "br"
        },
        {
                "name": "Flag of Brunei",
                "slug": "brunei",
                "url": "https://flagpedia.net/brunei",
                "code": "bn"
        },
        {
                "name": "Flag of Bulgaria",
                "slug": "bulgaria",
                "url": "https://flagpedia.net/bulgaria",
                "code": "bg"
        },
        {
                "name": "Flag of Burkina Faso",
                "slug": "burkina-faso",
                "url": "https://flagpedia.net/burkina-faso",
                "code": "bf"
        },
        {
                "name": "Flag of Burundi",
                "slug": "burundi",
                "url": "https://flagpedia.net/burundi",
                "code": "bi"
        },
        {
                "name": "Flag of Cambodia",
                "slug": "cambodia",
                "url": "https://flagpedia.net/cambodia",
                "code": "kh"
        },
        {
                "name": "Flag of Cameroon",
                "slug": "cameroon",
                "url": "https://flagpedia.net/cameroon",
                "code": "cm"
        },
        {
                "name": "Flag of Canada",
                "slug": "canada",
                "url": "https://flagpedia.net/canada",
                "code": "ca"
        },
        {
                "name": "Flag of Cape Verde",
                "slug": "cape-verde",
                "url": "https://flagpedia.net/cape-verde",
                "code": "cv"
        },
        {
                "name": "Flag of Central African Republic",
                "slug": "the-central-african-republic",
                "url": "https://flagpedia.net/the-central-african-republic",
                "code": "cf"
        },
        {
                "name": "Flag of Chad",
                "slug": "chad",
                "url": "https://flagpedia.net/chad",
                "code": "td"
        },
        {
                "name": "Flag of Chile",
                "slug": "chile",
                "url": "https://flagpedia.net/chile",
                "code": "cl"
        },
        {
                "name": "Flag of China",
                "slug": "the-people-s-republic-of-china",
                "url": "https://flagpedia.net/the-people-s-republic-of-china",
                "code": "cn"
        },
        {
                "name": "Flag of Colombia",
                "slug": "colombia",
                "url": "https://flagpedia.net/colombia",
                "code": "co"
        },
        {
                "name": "Flag of Comoros",
                "slug": "the-comoros",
                "url": "https://flagpedia.net/the-comoros",
                "code": "km"
        },
        {
                "name": "Flag of Republic of the Congo",
                "slug": "the-republic-of-the-congo",
                "url": "https://flagpedia.net/the-republic-of-the-congo",
                "code": "cg"
        },
        {
                "name": "Flag of DR Congo",
                "slug": "the-democratic-republic-of-the-congo",
                "url": "https://flagpedia.net/the-democratic-republic-of-the-congo",
                "code": "cd"
        },
        {
                "name": "Flag of Costa Rica",
                "slug": "costa-rica",
                "url": "https://flagpedia.net/costa-rica",
                "code": "cr"
        },
        {
                "name": "Flag of C√¥te d'Ivoire",
                "slug": "cote-d-ivoire",
                "url": "https://flagpedia.net/cote-d-ivoire",
                "code": "ci"
        },
        {
                "name": "Flag of Croatia",
                "slug": "croatia",
                "url": "https://flagpedia.net/croatia",
                "code": "hr"
        },
        {
                "name": "Flag of Cuba",
                "slug": "cuba",
                "url": "https://flagpedia.net/cuba",
                "code": "cu"
        },
        {
                "name": "Flag of Cyprus",
                "slug": "cyprus",
                "url": "https://flagpedia.net/cyprus",
                "code": "cy"
        },
        {
                "name": "Flag of Czechia",
                "slug": "the-czech-republic",
                "url": "https://flagpedia.net/the-czech-republic",
                "code": "cz"
        },
        {
                "name": "Flag of Denmark",
                "slug": "denmark",
                "url": "https://flagpedia.net/denmark",
                "code": "dk"
        },
        {
                "name": "Flag of Djibouti",
                "slug": "djibouti",
                "url": "https://flagpedia.net/djibouti",
                "code": "dj"
        },
        {
                "name": "Flag of Dominica",
                "slug": "dominica",
                "url": "https://flagpedia.net/dominica",
                "code": "dm"
        },
        {
                "name": "Flag of Dominican Republic",
                "slug": "the-dominican-republic",
                "url": "https://flagpedia.net/the-dominican-republic",
                "code": "do"
        },
        {
                "name": "Flag of Ecuador",
                "slug": "ecuador",
                "url": "https://flagpedia.net/ecuador",
                "code": "ec"
        },
        {
                "name": "Flag of Egypt",
                "slug": "egypt",
                "url": "https://flagpedia.net/egypt",
                "code": "eg"
        },
        {
                "name": "Flag of El Salvador",
                "slug": "el-salvador",
                "url": "https://flagpedia.net/el-salvador",
                "code": "sv"
        },
        {
                "name": "Flag of Equatorial Guinea",
                "slug": "equatorial-guinea",
                "url": "https://flagpedia.net/equatorial-guinea",
                "code": "gq"
        },
        {
                "name": "Flag of Eritrea",
                "slug": "eritrea",
                "url": "https://flagpedia.net/eritrea",
                "code": "er"
        },
        {
                "name": "Flag of Estonia",
                "slug": "estonia",
                "url": "https://flagpedia.net/estonia",
                "code": "ee"
        },
        {
                "name": "Flag of Eswatini",
                "slug": "swaziland",
                "url": "https://flagpedia.net/swaziland",
                "code": "sz"
        },
        {
                "name": "Flag of Ethiopia",
                "slug": "ethiopia",
                "url": "https://flagpedia.net/ethiopia",
                "code": "et"
        },
        {
                "name": "Flag of Fiji",
                "slug": "fiji",
                "url": "https://flagpedia.net/fiji",
                "code": "fj"
        },
        {
                "name": "Flag of Finland",
                "slug": "finland",
                "url": "https://flagpedia.net/finland",
                "code": "fi"
        },
        {
                "name": "Flag of France",
                "slug": "france",
                "url": "https://flagpedia.net/france",
                "code": "fr"
        },
        {
                "name": "Flag of Gabon",
                "slug": "gabon",
                "url": "https://flagpedia.net/gabon",
                "code": "ga"
        },
        {
                "name": "Flag of Gambia",
                "slug": "the-gambia",
                "url": "https://flagpedia.net/the-gambia",
                "code": "gm"
        },
        {
                "name": "Flag of Georgia",
                "slug": "georgia",
                "url": "https://flagpedia.net/georgia",
                "code": "ge"
        },
        {
                "name": "Flag of Germany",
                "slug": "germany",
                "url": "https://flagpedia.net/germany",
                "code": "de"
        },
        {
                "name": "Flag of Ghana",
                "slug": "ghana",
                "url": "https://flagpedia.net/ghana",
                "code": "gh"
        },
        {
                "name": "Flag of Greece",
                "slug": "greece",
                "url": "https://flagpedia.net/greece",
                "code": "gr"
        },
        {
                "name": "Flag of Grenada",
                "slug": "grenada",
                "url": "https://flagpedia.net/grenada",
                "code": "gd"
        },
        {
                "name": "Flag of Guatemala",
                "slug": "guatemala",
                "url": "https://flagpedia.net/guatemala",
                "code": "gt"
        },
        {
                "name": "Flag of Guinea",
                "slug": "guinea",
                "url": "https://flagpedia.net/guinea",
                "code": "gn"
        },
        {
                "name": "Flag of Guinea-Bissau",
                "slug": "guinea-bissau",
                "url": "https://flagpedia.net/guinea-bissau",
                "code": "gw"
        },
        {
                "name": "Flag of Guyana",
                "slug": "guyana",
                "url": "https://flagpedia.net/guyana",
                "code": "gy"
        },
        {
                "name": "Flag of Haiti",
                "slug": "haiti",
                "url": "https://flagpedia.net/haiti",
                "code": "ht"
        },
        {
                "name": "Flag of Honduras",
                "slug": "honduras",
                "url": "https://flagpedia.net/honduras",
                "code": "hn"
        },
        {
                "name": "Flag of Hungary",
                "slug": "hungary",
                "url": "https://flagpedia.net/hungary",
                "code": "hu"
        },
        {
                "name": "Flag of Iceland",
                "slug": "iceland",
                "url": "https://flagpedia.net/iceland",
                "code": "is"
        },
        {
                "name": "Flag of India",
                "slug": "india",
                "url": "https://flagpedia.net/india",
                "code": "in"
        },
        {
                "name": "Flag of Indonesia",
                "slug": "indonesia",
                "url": "https://flagpedia.net/indonesia",
                "code": "id"
        },
        {
                "name": "Flag of Iran",
                "slug": "iran",
                "url": "https://flagpedia.net/iran",
                "code": "ir"
        },
        {
                "name": "Flag of Iraq",
                "slug": "iraq",
                "url": "https://flagpedia.net/iraq",
                "code": "iq"
        },
        {
                "name": "Flag of Ireland",
                "slug": "ireland",
                "url": "https://flagpedia.net/ireland",
                "code": "ie"
        },
        {
                "name": "Flag of Israel",
                "slug": "israel",
                "url": "https://flagpedia.net/israel",
                "code": "il"
        },
        {
                "name": "Flag of Italy",
                "slug": "italy",
                "url": "https://flagpedia.net/italy",
                "code": "it"
        },
        {
                "name": "Flag of Jamaica",
                "slug": "jamaica",
                "url": "https://flagpedia.net/jamaica",
                "code": "jm"
        },
        {
                "name": "Flag of Japan",
                "slug": "japan",
                "url": "https://flagpedia.net/japan",
                "code": "jp"
        },
        {
                "name": "Flag of Jordan",
                "slug": "jordan",
                "url": "https://flagpedia.net/jordan",
                "code": "jo"
        },
        {
                "name": "Flag of Kazakhstan",
                "slug": "kazakhstan",
                "url": "https://flagpedia.net/kazakhstan",
                "code": "kz"
        },
        {
                "name": "Flag of Kenya",
                "slug": "kenya",
                "url": "https://flagpedia.net/kenya",
                "code": "ke"
        },
        {
                "name": "Flag of Kiribati",
                "slug": "kiribati",
                "url": "https://flagpedia.net/kiribati",
                "code": "ki"
        },
        {
                "name": "Flag of North Korea",
                "slug": "north-korea",
                "url": "https://flagpedia.net/north-korea",
                "code": "kp"
        },
        {
                "name": "Flag of South Korea",
                "slug": "south-korea",
                "url": "https://flagpedia.net/south-korea",
                "code": "kr"
        },
        {
                "name": "Flag of Kuwait",
                "slug": "kuwait",
                "url": "https://flagpedia.net/kuwait",
                "code": "kw"
        },
        {
                "name": "Flag of Kyrgyzstan",
                "slug": "kyrgyzstan",
                "url": "https://flagpedia.net/kyrgyzstan",
                "code": "kg"
        },
        {
                "name": "Flag of Laos",
                "slug": "laos",
                "url": "https://flagpedia.net/laos",
                "code": "la"
        },
        {
                "name": "Flag of Latvia",
                "slug": "latvia",
                "url": "https://flagpedia.net/latvia",
                "code": "lv"
        },
        {
                "name": "Flag of Lebanon",
                "slug": "lebanon",
                "url": "https://flagpedia.net/lebanon",
                "code": "lb"
        },
        {
                "name": "Flag of Lesotho",
                "slug": "lesotho",
                "url": "https://flagpedia.net/lesotho",
                "code": "ls"
        },
        {
                "name": "Flag of Liberia",
                "slug": "liberia",
                "url": "https://flagpedia.net/liberia",
                "code": "lr"
        },
        {
                "name": "Flag of Libya",
                "slug": "libya",
                "url": "https://flagpedia.net/libya",
                "code": "ly"
        },
        {
                "name": "Flag of Liechtenstein",
                "slug": "liechtenstein",
                "url": "https://flagpedia.net/liechtenstein",
                "code": "li"
        },
        {
                "name": "Flag of Lithuania",
                "slug": "lithuania",
                "url": "https://flagpedia.net/lithuania",
                "code": "lt"
        },
        {
                "name": "Flag of Luxembourg",
                "slug": "luxembourg",
                "url": "https://flagpedia.net/luxembourg",
                "code": "lu"
        },
        {
                "name": "Flag of Madagascar",
                "slug": "madagascar",
                "url": "https://flagpedia.net/madagascar",
                "code": "mg"
        },
        {
                "name": "Flag of Malawi",
                "slug": "malawi",
                "url": "https://flagpedia.net/malawi",
                "code": "mw"
        },
        {
                "name": "Flag of Malaysia",
                "slug": "malaysia",
                "url": "https://flagpedia.net/malaysia",
                "code": "my"
        },
        {
                "name": "Flag of Maldives",
                "slug": "maldives",
                "url": "https://flagpedia.net/maldives",
                "code": "mv"
        },
        {
                "name": "Flag of Mali",
                "slug": "mali",
                "url": "https://flagpedia.net/mali",
                "code": "ml"
        },
        {
                "name": "Flag of Malta",
                "slug": "malta",
                "url": "https://flagpedia.net/malta",
                "code": "mt"
        },
        {
                "name": "Flag of Marshall Islands",
                "slug": "the-marshall-islands",
                "url": "https://flagpedia.net/the-marshall-islands",
                "code": "mh"
        },
        {
                "name": "Flag of Mauritania",
                "slug": "mauritania",
                "url": "https://flagpedia.net/mauritania",
                "code": "mr"
        },
        {
                "name": "Flag of Mauritius",
                "slug": "mauritius",
                "url": "https://flagpedia.net/mauritius",
                "code": "mu"
        },
        {
                "name": "Flag of Mexico",
                "slug": "mexico",
                "url": "https://flagpedia.net/mexico",
                "code": "mx"
        },
        {
                "name": "Flag of Micronesia",
                "slug": "micronesia",
                "url": "https://flagpedia.net/micronesia",
                "code": "fm"
        },
        {
                "name": "Flag of Moldova",
                "slug": "moldova",
                "url": "https://flagpedia.net/moldova",
                "code": "md"
        },
        {
                "name": "Flag of Monaco",
                "slug": "monaco",
                "url": "https://flagpedia.net/monaco",
                "code": "mc"
        },
        {
                "name": "Flag of Mongolia",
                "slug": "mongolia",
                "url": "https://flagpedia.net/mongolia",
                "code": "mn"
        },
        {
                "name": "Flag of Montenegro",
                "slug": "montenegro",
                "url": "https://flagpedia.net/montenegro",
                "code": "me"
        },
        {
                "name": "Flag of Morocco",
                "slug": "morocco",
                "url": "https://flagpedia.net/morocco",
                "code": "ma"
        },
        {
                "name": "Flag of Mozambique",
                "slug": "mozambique",
                "url": "https://flagpedia.net/mozambique",
                "code": "mz"
        },
        {
                "name": "Flag of Myanmar",
                "slug": "myanmar",
                "url": "https://flagpedia.net/myanmar",
                "code": "mm"
        },
        {
                "name": "Flag of Namibia",
                "slug": "namibia",
                "url": "https://flagpedia.net/namibia",
                "code": "na"
        },
        {
                "name": "Flag of Nauru",
                "slug": "nauru",
                "url": "https://flagpedia.net/nauru",
                "code": "nr"
        },
        {
                "name": "Flag of Nepal",
                "slug": "nepal",
                "url": "https://flagpedia.net/nepal",
                "code": "np"
        },
        {
                "name": "Flag of Netherlands",
                "slug": "the-netherlands",
                "url": "https://flagpedia.net/the-netherlands",
                "code": "nl"
        },
        {
                "name": "Flag of New Zealand",
                "slug": "new-zealand",
                "url": "https://flagpedia.net/new-zealand",
                "code": "nz"
        },
        {
                "name": "Flag of Nicaragua",
                "slug": "nicaragua",
                "url": "https://flagpedia.net/nicaragua",
                "code": "ni"
        },
        {
                "name": "Flag of Niger",
                "slug": "niger",
                "url": "https://flagpedia.net/niger",
                "code": "ne"
        },
        {
                "name": "Flag of Nigeria",
                "slug": "nigeria",
                "url": "https://flagpedia.net/nigeria",
                "code": "ng"
        },
        {
                "name": "Flag of North Macedonia",
                "slug": "macedonia",
                "url": "https://flagpedia.net/macedonia",
                "code": "mk"
        },
        {
                "name": "Flag of Norway",
                "slug": "norway",
                "url": "https://flagpedia.net/norway",
                "code": "no"
        },
        {
                "name": "Flag of Oman",
                "slug": "oman",
                "url": "https://flagpedia.net/oman",
                "code": "om"
        },
        {
                "name": "Flag of Pakistan",
                "slug": "pakistan",
                "url": "https://flagpedia.net/pakistan",
                "code": "pk"
        },
        {
                "name": "Flag of Palau",
                "slug": "palau",
                "url": "https://flagpedia.net/palau",
                "code": "pw"
        },
        {
                "name": "Flag of Palestine",
                "slug": "palestine",
                "url": "https://flagpedia.net/palestine",
                "code": "ps"
        },
        {
                "name": "Flag of Panama",
                "slug": "panama",
                "url": "https://flagpedia.net/panama",
                "code": "pa"
        },
        {
                "name": "Flag of Papua New Guinea",
                "slug": "papua-new-guinea",
                "url": "https://flagpedia.net/papua-new-guinea",
                "code": "pg"
        },
        {
                "name": "Flag of Paraguay",
                "slug": "paraguay",
                "url": "https://flagpedia.net/paraguay",
                "code": "py"
        },
        {
                "name": "Flag of Peru",
                "slug": "peru",
                "url": "https://flagpedia.net/peru",
                "code": "pe"
        },
        {
                "name": "Flag of Philippines",
                "slug": "the-philippines",
                "url": "https://flagpedia.net/the-philippines",
                "code": "ph"
        },
        {
                "name": "Flag of Poland",
                "slug": "poland",
                "url": "https://flagpedia.net/poland",
                "code": "pl"
        },
        {
                "name": "Flag of Portugal",
                "slug": "portugal",
                "url": "https://flagpedia.net/portugal",
                "code": "pt"
        },
        {
                "name": "Flag of Qatar",
                "slug": "qatar",
                "url": "https://flagpedia.net/qatar",
                "code": "qa"
        },
        {
                "name": "Flag of Romania",
                "slug": "romania",
                "url": "https://flagpedia.net/romania",
                "code": "ro"
        },
        {
                "name": "Flag of Russia",
                "slug": "russia",
                "url": "https://flagpedia.net/russia",
                "code": "ru"
        },
        {
                "name": "Flag of Rwanda",
                "slug": "rwanda",
                "url": "https://flagpedia.net/rwanda",
                "code": "rw"
        },
        {
                "name": "Flag of Saint Kitts and Nevis",
                "slug": "saint-kitts-and-nevis",
                "url": "https://flagpedia.net/saint-kitts-and-nevis",
                "code": "kn"
        },
        {
                "name": "Flag of Saint Lucia",
                "slug": "saint-lucia",
                "url": "https://flagpedia.net/saint-lucia",
                "code": "lc"
        },
        {
                "name": "Flag of Saint Vincent and the Grenadines",
                "slug": "saint-vincent-and-the-grenadines",
                "url": "https://flagpedia.net/saint-vincent-and-the-grenadines",
                "code": "vc"
        },
        {
                "name": "Flag of Samoa",
                "slug": "samoa",
                "url": "https://flagpedia.net/samoa",
                "code": "ws"
        },
        {
                "name": "Flag of San Marino",
                "slug": "san-marino",
                "url": "https://flagpedia.net/san-marino",
                "code": "sm"
        },
        {
                "name": "Flag of S√£o Tom√© and Pr√≠ncipe",
                "slug": "sao-tome-and-principe",
                "url": "https://flagpedia.net/sao-tome-and-principe",
                "code": "st"
        },
        {
                "name": "Flag of Saudi Arabia",
                "slug": "saudi-arabia",
                "url": "https://flagpedia.net/saudi-arabia",
                "code": "sa"
        },
        {
                "name": "Flag of Senegal",
                "slug": "senegal",
                "url": "https://flagpedia.net/senegal",
                "code": "sn"
        },
        {
                "name": "Flag of Serbia",
                "slug": "serbia",
                "url": "https://flagpedia.net/serbia",
                "code": "rs"
        },
        {
                "name": "Flag of Seychelles",
                "slug": "the-seychelles",
                "url": "https://flagpedia.net/the-seychelles",
                "code": "sc"
        },
        {
                "name": "Flag of Sierra Leone",
                "slug": "sierra-leone",
                "url": "https://flagpedia.net/sierra-leone",
                "code": "sl"
        },
        {
                "name": "Flag of Singapore",
                "slug": "singapore",
                "url": "https://flagpedia.net/singapore",
                "code": "sg"
        },
        {
                "name": "Flag of Slovakia",
                "slug": "slovakia",
                "url": "https://flagpedia.net/slovakia",
                "code": "sk"
        },
        {
                "name": "Flag of Slovenia",
                "slug": "slovenia",
                "url": "https://flagpedia.net/slovenia",
                "code": "si"
        },
        {
                "name": "Flag of Solomon Islands",
                "slug": "the-solomon-islands",
                "url": "https://flagpedia.net/the-solomon-islands",
                "code": "sb"
        },
        {
                "name": "Flag of Somalia",
                "slug": "somalia",
                "url": "https://flagpedia.net/somalia",
                "code": "so"
        },
        {
                "name": "Flag of South Africa",
                "slug": "south-africa",
                "url": "https://flagpedia.net/south-africa",
                "code": "za"
        },
        {
                "name": "Flag of South Sudan",
                "slug": "south-sudan",
                "url": "https://flagpedia.net/south-sudan",
                "code": "ss"
        },
        {
                "name": "Flag of Spain",
                "slug": "spain",
                "url": "https://flagpedia.net/spain",
                "code": "es"
        },
        {
                "name": "Flag of Sri Lanka",
                "slug": "sri-lanka",
                "url": "https://flagpedia.net/sri-lanka",
                "code": "lk"
        },
        {
                "name": "Flag of Sudan",
                "slug": "sudan",
                "url": "https://flagpedia.net/sudan",
                "code": "sd"
        },
        {
                "name": "Flag of Suriname",
                "slug": "suriname",
                "url": "https://flagpedia.net/suriname",
                "code": "sr"
        },
        {
                "name": "Flag of Sweden",
                "slug": "sweden",
                "url": "https://flagpedia.net/sweden",
                "code": "se"
        },
        {
                "name": "Flag of Switzerland",
                "slug": "switzerland",
                "url": "https://flagpedia.net/switzerland",
                "code": "ch"
        },
        {
                "name": "Flag of Syria",
                "slug": "syria",
                "url": "https://flagpedia.net/syria",
                "code": "sy"
        },
        {
                "name": "Flag of Tajikistan",
                "slug": "tajikistan",
                "url": "https://flagpedia.net/tajikistan",
                "code": "tj"
        },
        {
                "name": "Flag of Tanzania",
                "slug": "tanzania",
                "url": "https://flagpedia.net/tanzania",
                "code": "tz"
        },
        {
                "name": "Flag of Thailand",
                "slug": "thailand",
                "url": "https://flagpedia.net/thailand",
                "code": "th"
        },
        {
                "name": "Flag of Timor-Leste",
                "slug": "east-timor",
                "url": "https://flagpedia.net/east-timor",
                "code": "tl"
        },
        {
                "name": "Flag of Togo",
                "slug": "togo",
                "url": "https://flagpedia.net/togo",
                "code": "tg"
        },
        {
                "name": "Flag of Tonga",
                "slug": "tonga",
                "url": "https://flagpedia.net/tonga",
                "code": "to"
        },
        {
                "name": "Flag of Trinidad and Tobago",
                "slug": "trinidad-and-tobago",
                "url": "https://flagpedia.net/trinidad-and-tobago",
                "code": "tt"
        },
        {
                "name": "Flag of Tunisia",
                "slug": "tunisia",
                "url": "https://flagpedia.net/tunisia",
                "code": "tn"
        },
        {
                "name": "Flag of Turkey",
                "slug": "turkey",
                "url": "https://flagpedia.net/turkey",
                "code": "tr"
        },
        {
                "name": "Flag of Turkmenistan",
                "slug": "turkmenistan",
                "url": "https://flagpedia.net/turkmenistan",
                "code": "tm"
        },
        {
                "name": "Flag of Tuvalu",
                "slug": "tuvalu",
                "url": "https://flagpedia.net/tuvalu",
                "code": "tv"
        },
        {
                "name": "Flag of Uganda",
                "slug": "uganda",
                "url": "https://flagpedia.net/uganda",
                "code": "ug"
        },
        {
                "name": "Flag of Ukraine",
                "slug": "ukraine",
                "url": "https://flagpedia.net/ukraine",
                "code": "ua"
        },
        {
                "name": "Flag of United Arab Emirates",
                "slug": "the-united-arab-emirates",
                "url": "https://flagpedia.net/the-united-arab-emirates",
                "code": "ae"
        },
        {
                "name": "Flag of United Kingdom",
                "slug": "the-united-kingdom",
                "url": "https://flagpedia.net/the-united-kingdom",
                "code": "gb"
        },
        {
                "name": "Flag of United States",
                "slug": "the-united-states",
                "url": "https://flagpedia.net/the-united-states",
                "code": "us"
        },
        {
                "name": "Flag of Uruguay",
                "slug": "uruguay",
                "url": "https://flagpedia.net/uruguay",
                "code": "uy"
        },
        {
                "name": "Flag of Uzbekistan",
                "slug": "uzbekistan",
                "url": "https://flagpedia.net/uzbekistan",
                "code": "uz"
        },
        {
                "name": "Flag of Vanuatu",
                "slug": "vanuatu",
                "url": "https://flagpedia.net/vanuatu",
                "code": "vu"
        },
        {
                "name": "Flag of Vatican City",
                "slug": "the-vatican-city",
                "url": "https://flagpedia.net/the-vatican-city",
                "code": "va"
        },
        {
                "name": "Flag of Venezuela",
                "slug": "venezuela",
                "url": "https://flagpedia.net/venezuela",
                "code": "ve"
        },
        {
                "name": "Flag of Vietnam",
                "slug": "vietnam",
                "url": "https://flagpedia.net/vietnam",
                "code": "vn"
        },
        {
                "name": "Flag of Yemen",
                "slug": "yemen",
                "url": "https://flagpedia.net/yemen",
                "code": "ye"
        },
        {
                "name": "Flag of Zambia",
                "slug": "zambia",
                "url": "https://flagpedia.net/zambia",
                "code": "zm"
        },
        {
                "name": "Flag of Zimbabwe",
                "slug": "zimbabwe",
                "url": "https://flagpedia.net/zimbabwe",
                "code": "zw"
        }
];

        class FlagGame {
            constructor() {
                this.countries = [];
                this.currentFlag = null;
                this.usedFlags = new Set();
                this.score = 0;
                this.total = 0;
                this.correct = 0;
                this.incorrect = 0;
                this.skipped = 0;
                this.selectedIndex = -1;

                this.init();
            }

            async init() {
                this.loadCountries();
                this.setupEventListeners();
                this.nextFlag();
            }

            loadCountries() {
                this.countries = COUNTRIES_DATA.map(country => ({
                    ...country,
                    displayName: country.name.replace('Flag of ', '')
                }));

                document.getElementById('loading').style.display = 'none';
                document.getElementById('flag').style.display = 'block';
                document.getElementById('countryInput').disabled = false;
                document.getElementById('submitBtn').disabled = false;
                document.getElementById('skipBtn').disabled = false;
            }

            setupEventListeners() {
                const input = document.getElementById('countryInput');
                const submitBtn = document.getElementById('submitBtn');
                const skipBtn = document.getElementById('skipBtn');
                const nextBtn = document.getElementById('nextBtn');
                const autocompleteList = document.getElementById('autocompleteList');

                input.addEventListener('input', (e) => this.handleInput(e));
                input.addEventListener('keydown', (e) => this.handleKeydown(e));
                input.addEventListener('blur', () => this.hideAutocomplete());

                submitBtn.addEventListener('click', () => this.submitGuess());
                skipBtn.addEventListener('click', () => this.skipFlag());
                nextBtn.addEventListener('click', () => this.nextFlag());

                autocompleteList.addEventListener('mousedown', (e) => {
                    e.preventDefault();
                });
                autocompleteList.addEventListener('click', (e) => {
                    if (e.target.classList.contains('autocomplete-item')) {
                        this.selectAutocompleteItem(e.target.textContent);
                    }
                });
            }

            handleInput(e) {
                const value = e.target.value.trim();
                if (value.length > 0) {
                    this.showAutocomplete(value);
                } else {
                    this.hideAutocomplete();
                }
                this.selectedIndex = -1;
            }

            handleKeydown(e) {
                const autocompleteList = document.getElementById('autocompleteList');
                const items = autocompleteList.querySelectorAll('.autocomplete-item');

                switch (e.key) {
                    case 'ArrowDown':
                        e.preventDefault();
                        this.selectedIndex = Math.min(this.selectedIndex + 1, items.length - 1);
                        this.updateSelection(items);
                        break;
                    case 'ArrowUp':
                        e.preventDefault();
                        this.selectedIndex = Math.max(this.selectedIndex - 1, -1);
                        this.updateSelection(items);
                        break;
                    case 'Enter':
                        e.preventDefault();
                        if (this.selectedIndex >= 0 && items[this.selectedIndex]) {
                            this.selectAutocompleteItem(items[this.selectedIndex].textContent);
                        } else {
                            this.submitGuess();
                        }
                        break;
                    case 'Escape':
                        this.hideAutocomplete();
                        break;
                }
            }

            updateSelection(items) {
                items.forEach((item, index) => {
                    item.classList.toggle('selected', index === this.selectedIndex);
                });
            }

            showAutocomplete(query) {
                const matches = this.countries
                    .filter(country =>
                        country.displayName.toLowerCase().includes(query.toLowerCase())
                    )
                    .slice(0, 8)
                    .sort((a, b) => {
                        const aStarts = a.displayName.toLowerCase().startsWith(query.toLowerCase());
                        const bStarts = b.displayName.toLowerCase().startsWith(query.toLowerCase());
                        if (aStarts && !bStarts) return -1;
                        if (!aStarts && bStarts) return 1;
                        return a.displayName.localeCompare(b.displayName);
                    });

                const autocompleteList = document.getElementById('autocompleteList');

                if (matches.length > 0) {
                    autocompleteList.innerHTML = matches
                        .map(country => `<div class="autocomplete-item">${country.displayName}</div>`)
                        .join('');
                    autocompleteList.style.display = 'block';
                } else {
                    this.hideAutocomplete();
                }
            }

            hideAutocomplete() {
                document.getElementById('autocompleteList').style.display = 'none';
                this.selectedIndex = -1;
            }

            selectAutocompleteItem(countryName) {
                document.getElementById('countryInput').value = countryName;
                this.hideAutocomplete();
                this.submitGuess();
            }

            nextFlag() {
                if (this.usedFlags.size >= this.countries.length) {
                    this.showGameComplete();
                    return;
                }

                let randomIndex;
                do {
                    randomIndex = Math.floor(Math.random() * this.countries.length);
                } while (this.usedFlags.has(randomIndex));

                this.currentFlag = this.countries[randomIndex];
                this.usedFlags.add(randomIndex);

                const flagImg = document.getElementById('flag');
                // Use flagcdn.com for GitHub Pages compatibility
                flagImg.src = `https://flagcdn.com/w320/${this.currentFlag.code}.png`;
                flagImg.alt = `Flag of ${this.currentFlag.displayName}`;

                // Fallback to local flags if needed (uncomment for local deployment)
                // flagImg.src = `./scripts/downloader/flags/${this.currentFlag.slug}/2x.png`;

                document.getElementById('countryInput').value = '';
                document.getElementById('countryInput').disabled = false;
                document.getElementById('submitBtn').disabled = false;
                document.getElementById('skipBtn').disabled = false;
                document.getElementById('nextBtn').style.display = 'none';
                document.getElementById('feedback').style.display = 'none';

                this.hideAutocomplete();
                document.getElementById('countryInput').focus();
            }

            submitGuess() {
                const guess = document.getElementById('countryInput').value.trim();
                if (!guess) return;

                const isCorrect = guess.toLowerCase() === this.currentFlag.displayName.toLowerCase();
                this.total++;

                if (isCorrect) {
                    this.score++;
                    this.correct++;
                    this.showFeedback('Correct! üéâ', 'correct');
                    this.updateStats();

                    setTimeout(() => {
                        this.nextFlag();
                    }, 1500);
                } else {
                    this.incorrect++;
                    this.showFeedback(`Incorrect. The answer was: ${this.currentFlag.displayName}`, 'incorrect');
                    this.updateStats();
                    this.disableInputs();
                    document.getElementById('nextBtn').style.display = 'inline-block';
                }
            }

            skipFlag() {
                this.total++;
                this.skipped++;
                this.showFeedback(`Skipped. The answer was: ${this.currentFlag.displayName}`, 'incorrect');
                this.updateStats();
                this.disableInputs();
                document.getElementById('nextBtn').style.display = 'inline-block';
            }

            showFeedback(message, type) {
                const feedback = document.getElementById('feedback');
                feedback.textContent = message;
                feedback.className = `feedback ${type}`;
                feedback.style.display = 'block';
            }

            disableInputs() {
                document.getElementById('countryInput').disabled = true;
                document.getElementById('submitBtn').disabled = true;
                document.getElementById('skipBtn').disabled = true;
                this.hideAutocomplete();
            }

            updateStats() {
                document.getElementById('score').textContent = this.score;
                document.getElementById('total').textContent = this.total;
                document.getElementById('correctCount').textContent = this.correct;
                document.getElementById('incorrectCount').textContent = this.incorrect;
                document.getElementById('skippedCount').textContent = this.skipped;
            }

            showGameComplete() {
                if (this.total === 0) {
                    this.showFeedback('No flags were loaded. Please check the setup.', 'incorrect');
                    return;
                }
                const percentage = Math.round((this.score / this.total) * 100);
                this.showFeedback(`Game Complete! Final Score: ${this.score}/${this.total} (${percentage}%)`, 'correct');
                document.getElementById('nextBtn').textContent = 'Play Again';
                document.getElementById('nextBtn').onclick = () => location.reload();
            }
        }

        window.addEventListener('DOMContentLoaded', () => {
            new FlagGame();
        });
    </script>
</body>
</html>